{%- extends "base.html" %}


{# Loads some of the macros included with Flask-Bootstrap. We are using the
   utils module here to automatically render Flask's flashed messages in a
   bootstrap friendly manner #}
{% import "bootstrap/utils.html" as utils %}


{# Inside the ``content`` is where you should place most of your own stuff.
   This will keep scripts at the page end and a navbar you add on later
   intact. #}
{% block head %}

    <style>
        #map { width:100%; }
    </style>



{{ super() }}
{% endblock %}

{% block scripts %}

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
    <!-- Bootstrap core CSS -->
    <link href="{{ url_for('static', filename='mdb/css/bootstrap.min.css')}}" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="{{ url_for('static', filename='mdb/css/mdb.min.css')}}" rel="stylesheet">
    <!-- Your custom styles (optional) -->
    <link href="{{ url_for('static', filename='mdb/css/style.min.css')}}" rel="stylesheet">


    <script type="text/javascript">
        var passed_reportcard_routes = {{ reportcard_routes|safe }}
    </script>
    <script type="text/javascript" src="{{ url_for('static', filename='maps/busmap-index.js')}}"></script>
    <script src='https://api.mapbox.com/mapbox.js/plugins/turf/v2.0.2/turf.min.js'></script>
{% endblock %}


{% block content_main %}


    <!--Main layout-->
    <main class="mt-2 pt-5">
        <div class="container">

            <!--Section: Jumbotron-->
            <section class="card wow fadeIn" style="background-image: url(https://mdbootstrap.com/img/Photos/Others/gradient1.jpg);">

                <!-- Content -->
                <div class="card-body text-white text-center py-5 px-5 my-5">

                    <h1 class="mb-4">
                        <strong>How are {{ collection_metadata.city_name}}'s buses doing today?</strong>
                    </h1>
                    <p>
                        <strong>{{ collection_metadata.description_short }}</strong>
                    </p>
                    <p class="mb-4">
                        <strong>{{ collection_metadata.description_long }}</strong>
                    </p>
                    <a target="_self" href="#reportcards" class="btn btn-outline-white btn-lg">Get route reportcards
                        <i class="fas fa-graduation-cap ml-2"></i>
                    </a>

                    {% for route_number in collection_metadata.routelist %}
                    <a target="_self" href={{ url_for('genRouteReportCollection', collection_url=collection_metadata.collection_url ,route=route_number, period='now') }} class="btn btn-outline-white btn-lg">{{ route_number }}
                        <i class="fas fa-map ml-2"></i>
                    </a>
                    {%  endfor %}



                    <!--<a target="_self" href="#map" class="btn btn-outline-white btn-lg">View live map
                        <i class="fas fa-map ml-2"></i>
                    </a>-->

                </div>
                <!-- Content -->
            </section>
            <!--Section: Jumbotron-->

            <!--Section: Map-->
            <section class=""card">
                <div id="map" class="container">
                </div>
            </section>


            <hr class="my-5">

            <!--Section: Cards-->
            <section id="reportcards" class="text-center">
                <h1 class="mb-4">
                <strong>Routes</strong>
                    </h1>

                <!--Grid row-->
                <div class="row mb-4 wow fadeIn">

                    {% for route in reportcard_routes %}
                    <!--Grid column-->
                    <div class="col-lg-4 col-md-12 mb-4">


                        <!--Card-->
                        <div class="card card-cascade narrower">

                            <!--Card image-->

                            <div class="view view-cascade gradient-card-header purple-gradient rounded-top">
                                <div class="embed-responsive">
                                    <img class="img-fluid rounded-top" src="{{ url_for('static', filename='images/route'+route.route+'.jpg')}}"></img>

                                </div>
                            </div>


                            <!--Card content-->
                            <div class="card-body card-body-cascade">
                                <!--Title-->
                                <h4 class="card-header-title text-left"><a href = {{ url_for('genRouteReportCollection',collection_url=collection_url ,source='nj',route=route.route, period='now') }}>{{route.route}}.</a>
                                <!--Text--> {{route.description_short}}</h4>

                            </div>

                        </div>
                        <!--/.Card-->


                    </div>
                    <!--Grid column-->
                    {% endfor %}


                </div>
                <!--Grid row-->


            </section>
            <!--Section: Cards-->

        </div>




    </main>
    <!--Main layout-->


{% endblock %}


