{%- extends "base.jinja2" %}
{% import "bootstrap/utils.html" as utils %}

{% block head %}
<META HTTP-EQUIV="refresh" CONTENT="60">
    <style>
        #map { width:100%; }
    </style>
{{ super() }}
{% endblock %}

{% block scripts %}

    <script type="text/javascript">
        var passed_trip_id = {{ trip_id | safe}}
    </script>

    <!-- fontawesome, bootstrap, mdb -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
    <link href="{{ url_for('static', filename='mdb/css/bootstrap.min.css')}}" rel="stylesheet">
    <link href="{{ url_for('static', filename='mdb/css/mdb.min.css')}}" rel="stylesheet">
    <!-- Your custom styles (optional) -->
    <link href="{{ url_for('static', filename='mdb/css/style.min.css')}}" rel="stylesheet">
    <!-- mapboxjs -->
    <script type="text/javascript" src="{{ url_for('static', filename='maps/busmap_route.js')}}"></script>
    <script src='https://api.mapbox.com/mapbox.js/plugins/turf/v3.0.11/turf.min.js'></script>



{% endblock %}


{% block sticky_nav %} {#  future highlight the current period with <mark></mark> #}

<nav class="navbar navbar-expand-sm sticky-top navbar-light bg-white">
    <div class="container">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbar1">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbar1">
            <ul class="navbar-nav">
              <li class="breadcrumb-item active"><a href = {{url_for('displayIndex')}}>home</a></li>
            </ul>
            <ul class="navbar-nav ml-auto">
                {% for p,v in period_descriptions.items() %}
                    <li class="breadcrumb-item "><a href = {{url_for('genRouteReport',collection_url=collection_url,route=routereport.route,period=v['name'])}}>{{  v['label'] }}</a></li>
                {%  endfor %}
            </ul>
        </div>
    </div>
</nav>

{% endblock %}



{%  block content_main %}

    <!--Main layout-->
    <main class="mt-2 pt-5">
        <div class="container">

            <!--ROW 1-->
            <div class="row mb-4 wow fadeIn">

                <!--TRIPDASH BLOCK START -->
                <div class="col-lg-8 col-md-12 mb-4">

                    <a href = {{ url_for('genRouteReport',collection_url=collection_url,route=routereport.route, period=period) }} id="{{routereport.route}}">
                        <h4 class="card-title">
                            {{routereport.route}} {{routereport.prettyname}}
                        </h4>
                    </a>

                    {% for trip_id,trip_data in trip_report.tripdash.items() %}
                    <div class="col-sm-12">
                        <p class="lead">trip {{ trip }} </p>
                            {% for stop in trip_data['stoplist'] %}
                                <button type="button" class="btn btn-light">
                                    {{stop.stop_id}}
                                    {% if stop.arrival_timestamp is not none %}
                                        <span class="badge badge-primary">{{stop.arrival_timestamp|strftime_today}}</span>
                                    {% else %}
                                        ---
                                    {% endif %}
                                </button>
                            {% endfor %}
                    </div>
                {% endfor %}

            <!--TRIPDASH BLOCK END -->

                <!--MAP BLOCK START -->
                <div class="col-lg-4 col-md-12 mb-4">
                    <div id="map" class="container">
                    </div>
                </div>
                <!--MAP BLOCK END -->
            </div>


{% endblock %}